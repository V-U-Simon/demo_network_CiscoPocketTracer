---
aliases: [ ]
created: 2022.09.05 8:00:17 –≤–µ—á–µ—Ä–∞
modified: 2022.09.13 9:25:41 —É—Ç—Ä–∞
---
#üåênetwork

>[!cite]- Source
> - [CISCO IOS: –°–û–•–†–ê–ù–ï–ù–ò–ï –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò](https://wiki.merionet.ru/seti/62/cisco-ios-soxranenie-konfiguracii/?ysclid=l7r63sqxop817630303)

Cisco IOS (Internetwork Operating System ‚Äî –ú–µ–∂—Å–µ—Ç–µ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)

```Bash
# –†–ï–ñ–ò–ú–´
enable              # –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π       | en
configure terminal  # –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | conf ter
no ip domain lookup # ‚è© –≤—ã–∫–ª—é—á–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–Ω

# üëÄ –ü–†–û–°–ú–û–¢–†:
show running-config # —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–ë–ë–ë

show ip route           # —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ - –≤—Å–µ
show ip route connected # —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ
show ip route static    # —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ
show ip route ospf      # —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ - OSPF

show ip int brief # —Å–ø–∏—Å–æ–∫ IP - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - —Å–æ—Å—Ç–æ—è–Ω–∏–µ

show arp	      # —Ç–∞–±–ª–∏—Ü—ã ARP (–Ω–∞ —Ä–æ—É—Ç–µ—Ä–∞—Ö)
show mac          # —Ç–∞–±–ª–∏—Ü—ã –∫–æ–º–º—É—Ç–∞—Ü–∏–∏ (–Ω–∞ —Å–≤–∏—á–∞—Ö) address-table
show dhcp	      # –Ω–∞—Å—Ç—Ä–æ–µ–∫ DHCP
show ip protocols # 
# –ö–æ–º–∞–Ω–¥—ã –¥–ª—è show:
sh vlan
sh int gigabitEthernet 0/1 switchport

# –î–†–£–ì–ò–ï –ö–û–ú–ê–ù–î–´
ping -t 192.168.0.1 # –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø–∏–Ω–≥ (-t)
traceroute 192.168.0.1 # –ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—É—Ç–∏
nslookup # —É—Ç–∏–ª–∏—Ç–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ DNS-—Å–µ—Ä–≤–µ—Ä—É –∏ —É–∑–Ω–∞—Ç—å —É –Ω–µ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∏–º–µ–Ω–∏ –∏–ª–∏ IP-–∞–¥—Ä–µ—Å–µ
hostname R1 # –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ö–æ—Å—Ç
reload #  –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

```Bash
# 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–µ–∂–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
enable             # –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π          | en
configure terminal # –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏    | conf ter


# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IP
interface fastEthernet 0/0   # –≤—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ | int fa0/0
interface loopback 0   # –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  | int loopback 0

ip address 192.168.1.254 255.255.255.0 # –ø—Ä–∏–≤—è–∑–∫–∞ IP –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
duplex auto
speed auto
no shutdown # –≤–∫–ª—é—á–∏—Ç—å —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å           | no sh
exit        # –≤—ã—Ö–æ–¥ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç—Ç–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞


# 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
copy running-config startup-config # —Å–æ—Ö—Ä–∞–Ω–∏–µ—Ç—å –≤ –∑–∞–≥—Ä—É–∑–æ—á–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é | copy run sta
# –∏–Ω–∞—á–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ –≤—Å–µ —Å–±—Ä–æ—Å–∏—Ç—Å—è
```

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

```Bash
# 10.0.0.0 | 192.168.0.1 - 192.168.0.2 | 10.0.1.0
```

```bash 
# –†–æ—É—Ç–µ—Ä 1
en
conf term
ip addr 192.168.0.1 255.255.255.0
no sh

interface FastEthernet0/1
ip route 10.0.0.0 255.255.255.0 192.168.0.2 # –ø–æ–¥—Å–µ—Ç—å / –º–∞—Å–∫–∞ / –∞–¥—Ä–µ—Å  —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ 
```

```Bash
# –†–æ—É—Ç–µ—Ä 2
en
conf term
ip addr 192.168.0.2 255.255.255.0
no sh

interface FastEthernet0/1
ip route 10.0.1.0 255.255.255.0 192.168.0.1 # –ø–æ–¥—Å–µ—Ç—å / –º–∞—Å–∫–∞ / –∞–¥—Ä–µ—Å  —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ 
```

# –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è [[üåê OSPF]]

>[!cite]- Source
> - ‚≠ê‚≠êyoutube - [–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ OSPF](https://www.youtube.com/watch?v=AcL_5BI3U_c&list=PLvGOckMhKg76rMzrows3RqNBmQeeBK-sn&index=4)

>[!example]- –ö–æ–º–∞–Ω–¥—ã
>
> ```Bash
> router ospf 1 # –≤–∫–ª—é—á–µ–Ω–∏–µ OSPF –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Ä–æ—É—Ç—Ä–µ (–Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π)
> router-id 1.1.1.1 # –Ω–∞–∑–∞–Ω–∞—á–µ–Ω–∏–µ Router-ID (–ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ –¥–ª—è —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º–æ—Å—Ç–∏)
> # –£ –∫–æ–≥–æ –±–æ–ª—å–µ ID —Ç–æ—Ç –∏ –±—É–¥–µ—Ç DR, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
> 
> 
> # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–π
> #       |__—Å–µ—Ç—å___| |_mask__| - wildcard mask (–æ–±—Ä–∞—Ç–Ω–∞—è –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏)
> network 192.168.1.0 0.0.0.255 area 0     # –≤–∫–ª—é—á–∏—Ç—å  —Å–µ—Ç—å      –≤ –ø—Ä–æ—Ü–µ—Å—Å   OSPF
> # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–º–æ—Ç—Ä—è—â–∏–µ –≤ –æ–∫–æ–Ω–µ—á–Ω—ã–µ —Å–µ—Ç–∏ —Å–ª–µ–¥—É–µ—Ç –¥–µ–ª–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–º–∏
> passive-interface gigabitEthernet 0/0    # –∏—Å–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞ OSPF
> no passive-interface gigabitEthernet 0/0 # –≤–∫–ª—é—á–∏—Ç—å  –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞ OSPF
> 
> 
> # üëÄ –ü–†–û–°–ú–û–¢–†:
> show ip ospf int brief # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –≤ OSPF –ø—Ä–æ—Ü–µ—Å—Å
> show ip ospf int       # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –≤ OSPF –ø—Ä–æ—Ü–µ—Å—Å
> show ip ospf neighbor  # —Å–æ—Å–µ–¥–µ–π –ø–æ OSPF
> show ip ospf database  # 
> show ip route ospf     # –º–∞—Ä—à—Ä—É—Ç–æ–≤, –≤–Ω–µ—Å–µ–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É OSPF
> ```


```Bash
# 192.168.1.1 | 10.0.1.1 - switch - 10.0.1.2 | 192.168.2.1
```

```Bash
# –†–æ—É—Ç–µ—Ä 1 - 192.168.1.1 | 10.0.1.1
en
conf term
router ospf 1 # –≤–∫–ª—é—á–µ–Ω–∏–µ OSPF –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Ä–æ—É—Ç—Ä–µ (–Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π)
# –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥–ª–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ç–∏ —É—á–∞–≤—Å—Ç–≤–æ–≤—É—é—â–∏–µ –≤ OSPF
network 192.168.1.0 0.0.0.255 area 0     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
network 10.0.1.0    0.0.0.255 area 0     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
```

```Bash
# –†–æ—É—Ç–µ—Ä 2 - 192.168.2.1 | 10.0.1.2
en
conf term
router ospf 1
network 192.168.2.0 0.0.0.255 area 0
network 10.0.1.0    0.0.0.255 area 0
```

OSPF c –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–≥–∏–æ–Ω–∞–º–∏

```Bash
# 192.168.1.1 | 10.0.1.1 - 10.0.1.2 ABR router 10.0.2.1 - 10.0.2.2 | 172.20.1.1
# \____________area 0_____________/            \____________area 1_____________/
```

```Bash
# ABR router
en
conf term
router ospf 1 # –≤–∫–ª—é—á–µ–Ω–∏–µ OSPF –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Ä–æ—É—Ç—Ä–µ (–Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π)
# –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥–ª–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ç–∏ —É—á–∞–≤—Å—Ç–≤–æ–≤—É—é—â–∏–µ –≤ OSPF
network 10.0.1.0  0.0.0.255 area 0     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
network 10.0.2.0  0.0.0.255 area 1     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
exit

# –í–´–ë–û–† DR (—Ä–∞—Å—Å—ã–ª–∞—é—â–∏–π ASL —Å–æ–æ–±—â–µ–Ω–∏—è, –¥–ª—è –ø–æ—Å—Ä–æ–π–∫–∏ –∫–∞—Ä—Ç—ã —Å–µ—Ç–∏)
# –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å–º–æ—Ç—Ä—è—â–µ–≥–æ –≤ area 0
conf term 
interfase fa0/0
ip ospf priority 100 # —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ DR —Ä–æ—É—Ç–µ—Ä–æ–º
exit
# –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å–º–æ—Ç—Ä—è—â–µ–≥–æ –≤ area 1
conf term
interfase fa0/1
ip ospf priority 100 # —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ DR —Ä–æ—É—Ç–µ—Ä–æ–º
exit

clear ip ospf process # –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å OSPF –¥–ª—è –ø–µ—Ä–µ–≤—ã–±–æ—Ä–æ–≤ DR
```

```Bash
# –†–æ—É—Ç–µ—Ä 1 - area 0
en
conf term
router ospf 1 # –≤–∫–ª—é—á–µ–Ω–∏–µ OSPF –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Ä–æ—É—Ç—Ä–µ (–Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π)
# –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥–ª–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ç–∏ —É—á–∞–≤—Å—Ç–≤–æ–≤—É—é—â–∏–µ –≤ OSPF
network 192.168.1.0 0.0.0.255 area 0     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
network 10.0.1.0    0.0.0.255 area 0     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
```

```Bash
# –†–æ—É—Ç–µ—Ä 2 - area 1
en
conf term
router ospf 1 # –≤–∫–ª—é—á–µ–Ω–∏–µ OSPF –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Ä–æ—É—Ç—Ä–µ (–Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π)
# –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥–ª–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ç–∏ —É—á–∞–≤—Å—Ç–≤–æ–≤—É—é—â–∏–µ –≤ OSPF
network 172.20.1.0  0.0.0.255 area 1     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
network 10.0.2.0    0.0.0.255 area 1     # –∞–Ω–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å OSPF
```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ [[üåê VLAN]]

>[!cite]- Source
> - ‚≠ê‚≠ê youtube - [Cisco —á–∞—Å—Ç—å I, —É—Ä–æ–∫ 11. Cisco VLAN](https://www.youtube.com/watch?v=NriV67DU6eg&t=684s)

```Bash
# 1. VLAN –Ω–∞ —Å–≤–∏—á–µ
vlan 2      # ‚úÖ —Å–æ–∑–¥–∞–µ–º VLAN 2 (VLAN 1 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω)
no vlan 10  # ‚ùå —É–¥–∞–ª–∏—Ç—å VLAN
name Admins #    –∏–º—è     VLAN


# üëÄ –ü–†–û–°–ú–û–¢–† 
show interfaces trunk # –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ trunk –ø–æ—Ä—Ç–∞—Ö
show vlan             # —Ç–∞–±–ª–∏—Ü–∞ VLAN
show vlan brief       # –∫–æ—Ä–æ—Ç–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ VLAN
# VLAN Name                             Status    Ports
# ---- -------------------------------- --------- -------------------------------
# 1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
#                                                 Fa0/5, Fa0/6, Fa0/7, Fa0/8
#                                                 Fa0/9, Fa0/10, Fa0/11, Fa0/12
#                                                 Fa0/13, Fa0/14, Fa0/15, Fa0/16
#                                                 Fa0/17, Fa0/18, Fa0/19, Fa0/20
#                                                 Fa0/21, Fa0/22, Fa0/23, Fa0/24
# 300  Admins                           active    
# 1002 fddi-default                     active    
# 1003 token-ring-default               active    
# 1004 fddinet-default                  active    
# 1005 trnet-default                    active  
# *******************************************************************************
# 1. –Ω–æ–º–µ—Ä VLAN
# 2. –∏–º—è VLAN    | name Admins
# 3. —Å—Ç–∞—Ç—É—Å
# 4. –ø–æ—Ä—Ç—ã       | –∫–∞–∫–∏–º VLAN-–∞–º –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ—Ä—Ç—ã
```

```Bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 1–≥–æ –ø–æ—Ä—Ç–∞ - ACCESS
interface fastEthernet 0/1 # –≤—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
switchport mode access     # –ø–µ—Ä–µ–≤–æ–¥ –≤ —Ä–µ–∂–∏–º access
switchport access vlan 2   # –∑–∞–∫—Ä–µ–ø–ª—è–µ–º 2–æ–π VLAN
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å 2 –ø–æ 5  –ø–æ—Ä—Ç—ã - ACCESS
interface range fastEthernet 0/2-5 # –≤—ã–±–∏—Ä–∞–µ–º –ø—É–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
switchport mode access
switchport access vlan 2
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–∞ —Å–º–æ—Ç—Ä—è—â–µ–≥–æ –Ω–∞ –¥—Ä—É–≥–æ–µ —Å–µ—Ç–µ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ - TRUNK
interface ge 0/1      
switchport mode trunk      # –ø–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ—Ä—Ç –≤ —Ä–µ–∂–∏–º TRUNK 
# —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤ –≤ trunk
switchport trunk allowed vlan 2, 3     # –æ–±—ä—è–≤–∏—Ç—å access –¥–ª—è 2 –∏ 3 vlan
switchport trunk allowed vlan add 4    # –¥–æ–±–∞–≤–∏—Ç—å
switchport trunk allowed vlan remove 4 # —É–¥–∞–ª–∏—Ç—å


# 2. VLAN –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ:
interface fastEthernet 0/0.2 # —Å—É–±–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π (–ª–æ–≥–∏—á–µ—Å–∫–∏–π) –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
encapsulation dot1Q 2        # –æ–ø—Ä–µ–¥–µ–ª—è–µ–º VLAN, —Ç—É—Ç 2–æ–π
ip address 192.168.1.1 255.255.255.0 # –¥–æ–±–∞–≤–ª—è–µ–º –∫ –Ω–µ–º—É IP

interface fastEthernet 0/0.3
encapsulation dot1Q 3
ip address 192.168.2.1 255.255.255.0

interface fastEthernet 0/0.4
encapsulation dot1Q 4
ip address 192.168.3.1 255.255.255.0
```

> –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ö –æ VLAN —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ flash –ø–∞–º—è—Ç–∏ –≤ —Ñ–∞–π–ª–µ `vlan.dat`

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ [[üåê DHCP]]

```Bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DHCP-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ. DHCP –±—É–¥–µ—Ç —Ä–∞–∑–¥–∞–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏, –∞–¥—Ä–µ—Å–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ä–∞–∑–¥–∞—é—Ç—Å—è.
ip dhcp excluded-address 192.168.0.1 192.168.0.10   # –∏—Å–∫–ª—é—á–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω –∞–¥—Ä–µ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–∞–≤–∞—Ç—å –Ω–µ –±—É–¥–µ–º (–Ω–∞—Ä–ø–∏–º–µ—Ä –∞–¥—Ä–µ—Å —Å–∞–º–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞)
ip dhcp pool TEST			   # —Å–æ–∑–¥–∞–µ–º –ø—É–ª —Å –∏–º–µ–Ω–µ–º
network 10.0.0.0 255.255.255.0 # –æ–ø–∏—Å—ã–≤–∞–µ–º –∏–∑ –∫–∞–∫–æ–π —Å–µ—Ç–∏ —Ä–∞–∑–¥–∞–µ–º –∞–¥—Ä–µ—Å–∞
default-router 10.0.0.1		   # –∫–∞–∫–æ–π —à–ª—é–∑ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ–º —Ä–∞–∑–¥–∞–≤–∞—Ç—å
dns-server 8.8.8.8			   # –∫–∞–∫–æ–π DNS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ–º —Ä–∞–∑–¥–∞–≤–∞—Ç—å
ip dhcp pool 192_NET		   # –ø—É–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
network 192.168.0.0 255.255.255.0
default-router 192.168.0.1
dns-server 4.4.4.4

# –ù–∞ —Ä–æ—É—Ç–µ—Ä–µ
# ip helper-address 192.168.3.2 # –∫—É–¥–∞ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP 

```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ [[üåêtelnet]]

```Bash
# TELNET
enable # –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
configure terminal # –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. 
# –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –≤–æ–∑–º–æ–∂–µ–Ω –≤–≤–æ–¥ –∫–æ–º–∞–Ω–¥, –ø–æ–∑–≤–æ–ª—è—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
# –ò–∑ —Ä–µ–∂–∏–º–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ–∂–∏–º–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏.
username admin secret cisco # —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏–º–µ–Ω–µ–º admin –∏ –ø–∞—Ä–æ–ª–µ–º cisco.

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ telnet
interface vlan 1 # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–æ–≤–µ—Å–∏–º –Ω–∞ –Ω–µ–≥–æ IP-–∞–¥—Ä–µ—Å. 
ip address 192.168.1.254 255.255.255.0 # –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∞–¥—Ä–µ—Å 192.168.1.254 —Å –º–∞—Å–∫–æ–π 255.255.255.0
no shutdown # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–∫–ª—é—á–µ–Ω, –ø–æ—ç—Ç–æ–º—É –≤–∫–ª—é—á–∞–µ–º –µ–≥–æ
# –í IOS 90% –∫–æ–º–∞–Ω–¥ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –∏–ª–∏ –≤—ã–∫–ª—é—á–∞—é—Ç—Å—è –ø—É—Ç–µ–º –ø—Ä–∏–ø–∏—Å—ã–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–∞–Ω–¥–æ–π ¬´no¬ª.

line vty 0 15 # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –ª–∏–Ω–∏–π, –≥–¥–µ –∫–∞–∫ —Ä–∞–∑ –∂–∏–≤–µ—Ç Telnet. 
# –û—Ç 0 –¥–æ 15 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —ç—Ç–æ –¥–ª—è –≤—Å–µ—Ö –ª–∏–Ω–∏–π. 
# –í—Å–µ–≥–æ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–µ–º –¥–æ 16 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

transport input all # —Ä–∞–∑—Ä–µ—à–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤. 

login local #¬†—É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –ª–æ–∫–∞–ª—å–Ω–∞—è, –∏ –æ–Ω –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –µ–µ —Å —Ç–æ–π, —á—Ç–æ –º—ã —Å–æ–∑–¥–∞–ª–∏
copy running-config startup-config # –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ò–Ω–∞—á–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ –≤—Å–µ —Å–±—Ä–æ—Å–∏—Ç—Å—è.
telnet 192.168.1.254       # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ telnet
```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ [[üåê SSH]]

```Bash
# SSH 
enable # –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
configure terminal # –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. 
username admin secret cisco # —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏–º–µ–Ω–µ–º admin –∏ –ø–∞—Ä–æ–ª–µ–º cisco.

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ ssh
interface vlan 1 # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–æ–≤–µ—Å–∏–º –Ω–∞ –Ω–µ–≥–æ IP-–∞–¥—Ä–µ—Å. 
ip address 192.168.1.254 255.255.255.0 # –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∞–¥—Ä–µ—Å 192.168.1.254 —Å –º–∞—Å–∫–æ–π 255.255.255.0
no shutdown # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–∫–ª—é—á–µ–Ω, –ø–æ—ç—Ç–æ–º—É –≤–∫–ª—é—á–∞–µ–º –µ–≥–æ
# .......—à–∞–≥–∏ –∏–∑ telnet

transport input all # —Ä–∞–∑—Ä–µ—à–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤. 
hostname SW1 # –º–µ–Ω—è–µ–º –∏–º—è –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞. –° —ç—Ç–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∏–º–µ–Ω–µ–º –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø–∏—Å–∞—Ç—å –¥–æ–º–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π.
ip domain-name cisadmin.ru # –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –¥–æ–º–µ–Ω
crypto key generate rsa # –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º RSA –∫–ª—é—á–∏
1024 # –£–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫–ª—é—á–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è 512, –Ω–æ —è –≤–≤–µ–¥—É 1024.

ssh -l admin 192.168.1.254 # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ ssh
```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–π [[üåê NAT]] –∏ [[üåê PAT]]

>[!cite]- Source
> - [PORT FORWARDING: –¢–ï–û–†–ò–Ø –ò –ù–ê–°–¢–†–û–ô–ö–ê CISCO](https://wiki.merionet.ru/seti/14/port-forwarding-teoriya-i-nastrojka-cisco/?ysclid=l7w2sznn7x239314828#)
> - [NAT –Ω–∞ Cisco. –ß–∞—Å—Ç—å 1](https://habr.com/ru/post/108931/?ysclid=l7w2tk3tcr85297178)

```Bash
show ip nat statistics     # üëÄ –ø—Ä–æ—Å–º–æ—Ç—Ä inside/outside –∏–Ω—Ç–µ—Ä—Ñ–µ—Å–æ–≤
show ip nat translations   # üëÄ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–π NAT
# Pro	Inside Global		    Inside Local	Outside local		    Outside global
# tcp	212.193.249.136:8080	192.168.1.10:80	212.193.249.17:46088	212.193.249.17:46088 

no ip nat create flow-entries #  –û—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–∏ –æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ 
ip nat translation ? # ‚è±Ô∏è –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è NAT

clear ip nat translation * # ‚ùå —É–¥–∞–ª–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π –≤ NAT
```

## –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π

Static NAT

```Bash
# 1. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏ –ú–∞—Ä–∫–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
interface GigabitEthernet0/0/0
ip address 8.8.8.1 255.255.255.0
ip nat outside # —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
duplex auto
speed auto

interface GigabitEthernet0/0/1
ip address 192.168.0.1 255.255.255.0
ip nat inside # —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
duplex auto
speed auto

# 2. –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é | Static NAT
ip nat inside source static 192.168.0.100 7.7.7.1     # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è 7.7.7.1     –≤ 192.168.0.100 
#                           ^ —á—Ç–æ         ^ –∫—É–¥–∞
```

Static PAT

```Bash
# 1. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏ –ú–∞—Ä–∫–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
# 2. –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é | static PAT (Port Forwarding)
ip nat inside source static tcp 192.168.0.100 80  6.6.6.1 80  # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è 6.6.6.1:80  –≤ 192.168.0.100:80
ip nat inside source static tcp 192.168.0.101 443 6.6.6.1 443 # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è 6.6.6.1:443 –≤ 192.168.0.101:443
#                           ^ —á—Ç–æ                 ^ –∫—É–¥–∞
```

## –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π

Dynamic NAT

```Bash
# inside source dynamic NAT
# 1. –£–∫–∞–∑—ã–≤–∞–µ–º¬†—á—Ç–æ¬†—Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å (Access list)
# ip access-list standard NAME # –ø—Ä–∏–º–µ—Ä –∏–º–µ–Ω–∏ (ACL_NAME) - NET_10.0.0.0/24
access-list 100 permit tcp 192.168.0.0 0.0.0.255 any # —Å–æ–∑–¥–∞–µ–º access-list, –ø–µ—Ä–µ—á–∏—Å–ª—è—é—â–∏–π —Ç—Ä–∞—Ñ–∏–∫


# 2. –£–∫–∞–∑—ã–≤–∞–µ–º –∫—É–¥–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å (–°–æ–∑–¥–∞–µ–º –ø—É–ª –∏–∑ –∞–¥—Ä–µ—Å–æ–≤)
ip nat pool NAME_OF_POOL 11.1.1.10 11.1.1.20 netmask 255.255.255.0 # –æ—Ç 11.1.1.10 –¥–æ 11.1.1.20 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ


# 3. –ú–∞—Ä–∫–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
interface fa 0/0
ip nat inside

interface fa 0/1  
ip nat outside


# 4. –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é
ip nat inside source list 100 pool NAME_OF_POOL # –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å IP-–∞–¥—Ä–µ—Å–∞
#                    ^ —á—Ç–æ     ^ –∫—É–¥–∞


# 5. –†–µ–∑—É–ª—å—Ç–∞—Ç
sh ip nat translations¬†# –æ–±—Ä–∞—Ç–∏–º—Å—è —Å —Ö–æ—Å—Ç–∞ 10.1.1.1 –∫ —Ö–æ—Å—Ç—É 11.1.1.2 
#     –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Å–ª–µ   –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–æ     –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ
# Pro Inside global    Inside local    Outside local  Outside global  
# tcp 11.1.1.10:55209  10.0.1.1:55209  11.1.1.2:23    11.1.1.2:23
# 
#     –∏–∑ —Ä–æ—É—Ç–µ—Ä–∞       –≤ —Ä–æ—É—Ç–µ—Ä
```

Dynamic PAT

```Bash
# inside source dynamic NAT with overload
# 1. –£–∫–∞–∑—ã–≤–∞–µ–º,¬†—á—Ç–æ¬†—Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å (Access list - NAME)
# 2. –£–∫–∞–∑—ã–≤–∞–µ–º –∫—É–¥–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å (–°–æ–∑–¥–∞–µ–º –ø—É–ª –∏–∑ –∞–¥—Ä–µ—Å–æ–≤, –µ—Å–ª–∏ –æ–¥–∏–Ω —Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º)
# 3. –ú–∞—Ä–∫–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã 
# 4. –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é | –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ IP-–∞–¥—Ä–µ—Å–∞ –∏ –ø–æ—Ä—Ç—ã
ip nat inside source list NAME pool NAME_OF_POOL overload # –µ—Å–ª–∏ –ø—É–ª  IP
ip nat inside source list NAME int fa0/1         overload # –µ—Å–ª–∏ –æ–¥–∏–Ω IP
#                    ^ —á—Ç–æ     ^ –∫—É–¥–∞


# 5. –†–µ–∑—É–ª—å—Ç–∞—Ç
sh ip nat translations¬†  
#     –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Å–ª–µ   –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–æ     –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ
# Pro Inside global    Inside local    Outside local  Outside global  
# tcp 11.1.1.11:21545  10.0.1.1:21545  11.1.1.2:23    11.1.1.2:23  
# tcp 11.1.1.11:49000  10.0.2.1:49000  11.1.1.2:23    11.1.1.2:23
```

# –¢—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ([[üåê GRE]])

>[!cite]- Source
> - ‚ùå[–ù–ê–°–¢–†–û–ô–ö–ê GRE –¢–£–ù–ù–ï–õ–Ø –ù–ê CISCO](https://wiki.merionet.ru/seti/22/nastroyka-gre-tunnelya-na-cisco/?ysclid=l7x5o427uk817773036#)
> - ‚≠ê[CISCO GRE](https://arny.ru/education/ccna-rs/cisco-gre/?ysclid=l7xes7yvs961697034)

```Bash
# 192.168.1.1 | 1.1.1.10 ---------------------------------- 2.2.2.10 | 172.20.1.1
#                        \__172.16.0.1 tunnel 172.16.0.2__/
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—É–Ω–Ω–µ–ª—è GRE

```Bash
show ip eigrp neighbors
show ip route
# ...D - EIGRP...
# D 192.168.2.0/24 [90/3584] via 10.10.10.2, 00:12:38, GigabitEthernet0/0
```

```Bash
# –†–æ—É—Ç–µ—Ä 1
interface Tunnel0
 ip address 172.16.0.1 255.255.255.0 # IP –≤ —Å–µ—Ç–∏ —Ç—É–Ω–Ω–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
 mtu 1476 # —É–º–µ–Ω—å—à–∞–Ω–Ω—ã–π MTU (Maximum Transfer Unit) | 1400 –±–∞–π—Ç
 tunnel source GigabitEthernet0/0/1
 tunnel destination 4.4.4.2 # –ø—É–±–ª–∏—á–Ω—ã–π IP –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
 
router eigrp 1
 network 172.16.0.0 0.0.0.255
ip route 192.168.2.0 255.255.255.0 172.16.0.2 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç


# –†–æ—É—Ç–µ—Ä 2
interface Tunnel0
 ip address 172.16.0.2 255.255.255.0
 mtu 1476
 tunnel source GigabitEthernet0/0/0
 tunnel destination 2.2.2.2 # –ø—É–±–ª–∏—á–Ω—ã–π IP –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
 
router eigrp 1
 network 172.16.0.0 0.0.0.255
ip route 10.0.0.0 255.255.255.0 172.16.0.2 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—É–Ω–Ω–µ–ª—è GRE IPSec (—Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º)

```bash
# –†–æ—É—Ç–µ—Ä 1
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ISAKMP (ISAKMP Phase 1)
R1(config)# crypto isakmp policy 1
R1(config-isakmp)# encr 3des 
R1(config-isakmp)# hash md5
R1(config-isakmp)# authentication pre-share
R1(config-isakmp)# group 2
R1(config-isakmp)# lifetime 86400

R1(config)# crypto isakmp key merionet address 2.2.2.10
R1(config)# crypto ipsec transform-set TS esp-3des esp-md5-hmac
R1(cfg-crypto-trans)# mode transport

# —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å IPSec
R1(config)# crypto ipsec profile protect-gre
R1(ipsec-profile)# set security-association lifetime seconds 86400
R1(ipsec-profile)# set transform-set TS

# –ø—Ä–∏–º–µ–Ω–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ IPSec –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Ç—É–Ω–Ω–µ–ª—è
R1(config)# interface Tunnel 0
R1(config-if)# tunnel protection ipsec profile protect-gre



# –†–æ—É—Ç–µ—Ä 2
R2(config)# crypto isakmp policy 1
R2(config-isakmp)# encr 3des
R2(config-isakmp)# hash md5
R2(config-isakmp)# authentication pre-share
R2(config-isakmp)# group 2
R2(config-isakmp)# lifetime 86400
 
R2(config)# crypto isakmp key merionet address 1.1.1.10
R2(config)# crypto ipsec transform-set TS esp-3des esp-md5-hmac
R2(cfg-crypto-trans)# mode transport

R2(config)# crypto ipsec profile protect-gre
R2(ipsec-profile)# set security-association lifetime seconds 86400
R2(ipsec-profile)# set transform-set TS

R2(config)# interface Tunnel 0
R2(config-if)# tunnel protection ipsec profile protect-gre
```
